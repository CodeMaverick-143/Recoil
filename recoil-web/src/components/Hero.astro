---
import { ArrowRight } from "lucide-react";
---

<section class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
    <!-- Background Gradient -->
    <div
        class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-3xl h-[500px] bg-recoil-red/20 blur-[120px] rounded-full opacity-50 pointer-events-none"
    >
    </div>
    <div
        class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center text-center"
    >
        <div
            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-sm text-slate-300 mb-8 backdrop-blur-sm"
        >
            <span class="w-2 h-2 rounded-full bg-recoil-red animate-pulse"
            ></span>
            <span>v0.2.5 Available Now</span>
        </div>

        <h1
            class="text-5xl md:text-7xl font-bold tracking-tight text-white mb-8 font-display"
        >
            Stop grepping for PIDs. <br />
            <span
                class="text-transparent bg-clip-text bg-gradient-to-r from-recoil-red to-orange-500 font-extrabold"
                >Just take the shot.</span
            >
        </h1>
        <p
            class="text-lg md:text-xl text-slate-400 max-w-2xl mb-12 leading-relaxed font-body"
        >
            A native system tray app to visualize and kill localhost processes
            instantly. <br />
            Built with Rust & Tauri for extreme performance.
        </p>

        <div class="flex flex-col items-center gap-6 w-full max-w-xl mx-auto">
            <div
                class="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto"
            >
                <a
                    id="download-btn"
                    href="https://github.com/CodeMaverick-143/recoil/releases/latest"
                    class="w-full sm:w-auto group relative flex items-center justify-center gap-3 bg-white text-recoil-bg px-8 py-4 rounded-md font-bold text-lg hover:bg-slate-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.2)] hover:shadow-[0_0_30px_rgba(255,255,255,0.4)] font-body tracking-tight"
                >
                    <span id="download-text">Download for Free</span>
                    <ArrowRight
                        className="group-hover:translate-x-1 transition-transform"
                    />
                </a>
                <a
                    href="https://github.com/CodeMaverick-143/recoil"
                    target="_blank"
                    class="w-full sm:w-auto flex items-center justify-center gap-3 px-8 py-4 rounded-md font-medium text-white border border-white/10 hover:bg-white/5 transition-colors font-body"
                >
                    View Source
                </a>
            </div>

            <!-- macOS Verification Command (Hidden by default) -->
            <div
                id="mac-cmd-container"
                class="hidden w-full max-w-lg animate-fade-in"
            >
                <div
                    class="flex items-center justify-center gap-2 mb-2 text-xs text-slate-400"
                >
                    <span class="w-1.5 h-1.5 rounded-full bg-amber-400"></span>
                    <span>Run this if app doesn't open:</span>
                </div>
                <div class="relative group/cmd">
                    <code
                        class="block text-xs font-mono text-amber-100/90 bg-amber-500/10 border border-amber-500/20 p-3 rounded-lg text-center select-all"
                    >
                        xattr -cr "/Applications/Recoil.app"
                    </code>
                </div>
            </div>
        </div>

        <!-- 3D Mockup Container -->
        <div
            class="mt-20 relative w-full max-w-5xl rounded-xl border border-white/10 backdrop-blur-sm shadow-2xl flex items-center justify-center overflow-hidden group"
        >
            <div
                class="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"
            >
            </div>
            <img
                src="/app-screenshot.png"
                alt="Recoil App Screenshot"
                class="w-full h-auto object-cover opacity-90 group-hover:opacity-100 transition-opacity"
            />
        </div>
    </div>
</section>

<script>
    const btn = document.getElementById("download-btn") as HTMLAnchorElement;
    const txt = document.getElementById("download-text");
    const platform = navigator.platform.toLowerCase();
    const userAgent = navigator.userAgent.toLowerCase();

    // Base URL for latest release downloads
    const BASE_URL =
        "https://github.com/CodeMaverick-143/recoil/releases/latest/download";

    // Simple detection logic
    const macCmd = document.getElementById("mac-cmd-container");

    if (platform.includes("mac") || userAgent.includes("mac")) {
        txt!.textContent = "Download for macOS";
        btn.href = `${BASE_URL}/Recoil_0.1.0_universal.dmg`;
        macCmd?.classList.remove("hidden");
    } else if (platform.includes("win") || userAgent.includes("windows")) {
        txt!.textContent = "Download for Windows";
        btn.href = `${BASE_URL}/Recoil_0.1.0_x64-setup.exe`;
    } else if (platform.includes("linux") || userAgent.includes("linux")) {
        txt!.textContent = "Download for Linux";
        btn.href = `${BASE_URL}/Recoil_0.1.0_amd64.deb`;
    }
</script>
